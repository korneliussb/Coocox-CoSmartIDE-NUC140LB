#include "DrvGPIO.h"
#include "DrvSYS.h"
#include "LCD_Driver.h"
#include "ScanKey.h"

int adc, tegangan;
int Init();
char temp;
unsigned char DrawBuffer[128*8];
void draw_LCD (unsigned char *buffer)
{
 int Y_Max = 8;
 int X_Max = 128;
 int y = 0;
 int x = 0;

  for(y=0; y<Y_Max; y++)
  {
   for(x=0; x<X_Max; x++)
   {
    SetPACA(y, 129-x);
    WriteData(buffer[x+y*128]);
   }
  }
}

unsigned char Zoro[64*8] = {

  0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x80,0x40,0x40,0x20,0xF8,0x00,0x00,0x00,0x00,0x80,0x40,0x20,0x18,0xE0,0x00,0x80,0x40,0x60,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x18,0x00,0x20,0x00,0x04,0x06,0x3A,0x0C,0x02,0x42,0x11,0x00,0xC0,0x80,0x00,0x02,0x03,0x02,0x02,0xF1,0x01,0x00,0x00,0x80,0x41,0xF1,0x00,0x00,0x02,0x03,0x80,0x82,0x02,0x00,0x00,0x12,0x1B,0x23,0x20,0x40,0x40,0x80,0x00,0x00,0x00,0x80,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  0x00,0x00,0x00,0x00,0x00,0x00,0x80,0x8C,0x98,0xE0,0x00,0x02,0x42,0xC0,0x02,0x28,0x80,0x06,0x4C,0x00,0x28,0x21,0x00,0x11,0x94,0xF4,0x20,0x20,0x20,0x20,0x11,0x12,0x21,0x41,0x18,0xE6,0x91,0x20,0x10,0x70,0xC1,0x85,0x21,0x28,0x08,0x40,0x82,0x22,0x20,0xA0,0x20,0x00,0x08,0x30,0x44,0x83,0x01,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  0x00,0x00,0x00,0x00,0x00,0x00,0xC0,0x21,0x1C,0x00,0x10,0x90,0x18,0x14,0x10,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x01,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x01,0x02,0x00,0x00,0x00,0x40,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x24,0x28,0xC9,0x88,0x00,0x08,0x30,0x45,0x46,0x82,0x80,0x00,0x00,0x00,0x00,
  0x00,0x00,0x00,0x00,0x00,0x03,0x42,0x61,0x59,0xC0,0x01,0x64,0x00,0x40,0x02,0x01,0x40,0x20,0x2A,0x25,0x40,0x80,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x2C,0x1B,0x00,0x00,0x00,0x00,0x88,0x40,0x20,0x25,0x04,0x20,0x00,0x02,0x02,0x02,0x40,0x81,0x29,0x72,0x0C,0x00,0x30,0xD2,0x39,0x01,0x00,0x00,0x00,0x00,0x00,
  0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x02,0x4F,0x18,0x70,0x60,0xE4,0x38,0x20,0x04,0x14,0x24,0x04,0x06,0x0C,0x05,0x03,0x26,0x14,0x0C,0x00,0x07,0x86,0x40,0x02,0x04,0x03,0x04,0x04,0x0E,0x0A,0x01,0x11,0x11,0x01,0x01,0x01,0x00,0x00,0x00,0x00,0x1C,0xBC,0xF8,0x09,0x20,0x0E,0x04,0x07,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x02,0x08,0x10,0x62,0x46,0x98,0xB8,0xC0,0x80,0x00,0x00,0x00,0x08,0x08,0x08,0x00,0x00,0x00,0x00,0x00,0x40,0x40,0x40,0x00,0x00,0x00,0x08,0x08,0x00,0x04,0x04,0x02,0x02,0x81,0x41,0x40,0x50,0xEE,0xE3,0xF1,0xF0,0xF8,0x0C,0x03,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x01,0x01,0x02,0x02,0x04,0x04,0x04,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x04,0x04,0x00,0x02,0x02,0x01,0x00,0x00,0x00,0x00,0x13,0x1F,0x19,0x0F,0x0C,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,

};

unsigned char Luffy[64*8] = {

  0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x80,0x80,0x40,0x00,0x20,0x00,0x10,0x10,0x00,0x00,0x08,0x08,0x08,0x08,0x28,0x20,0x00,0x10,0x50,0x00,0xA0,0x40,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x80,0x64,0x58,0x2C,0x52,0x91,0x83,0xB0,0x20,0x24,0x20,0x00,0x08,0x08,0x08,0x08,0x08,0x00,0x10,0x03,0x10,0x02,0x00,0x18,0x40,0x40,0x31,0xF2,0x30,0x22,0x44,0x10,0xC0,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x80,0x20,0x08,0x04,0x0A,0x8D,0x28,0x1A,0x09,0x01,0x00,0x00,0x00,0x00,0x40,0x00,0x98,0x44,0x10,0x04,0x01,0x00,0x02,0x08,0x60,0x06,0x08,0x10,0x40,0x00,0x80,0x00,0xE0,0x00,0x00,0x01,0x02,0x00,0x04,0x49,0x08,0x00,0x08,0x10,0x40,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x7F,0x00,0x00,0x62,0x09,0xA7,0x00,0x00,0x00,0x80,0x3C,0xC0,0x8C,0x21,0x00,0x10,0x8F,0x80,0x00,0x10,0x00,0x00,0x00,0x00,0x00,0x03,0x00,0x10,0x00,0x93,0x95,0x14,0x20,0x41,0x98,0xC0,0x00,0x00,0x00,0x24,0x37,0x44,0x00,0x00,0x00,0x3F,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x03,0x0C,0x10,0x26,0x44,0x84,0x3C,0x00,0x08,0x0C,0xE0,0x00,0x04,0x68,0x28,0x29,0x21,0x20,0x20,0x20,0x00,0x08,0x00,0x00,0x00,0x20,0x20,0x20,0x21,0x20,0x80,0x20,0x04,0xC0,0x9B,0x00,0x44,0x3A,0x82,0x40,0x20,0x10,0x04,0x01,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x01,0x01,0x03,0x02,0x01,0x02,0x04,0x05,0x02,0x08,0x04,0x08,0x00,0x08,0x00,0x00,0x08,0x00,0x00,0x04,0x08,0x02,0x05,0x04,0x04,0x01,0x02,0x02,0x01,0x01,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,

};

int main(void)
{
 uint8_t i,j;
  UNLOCKREG();
  DrvSYS_SetOscCtrl(E_SYS_XTL12M,1);
  DrvSYS_Delay(20000);
  DrvSYS_SelectHCLKSource(0);
  LOCKREG();
  unsigned char Angka;
     Init();
     Initial_pannel();
     clr_all_pannal();
     DrvGPIO_ClrBit(E_GPD,14);
// Init();
// uint8_t i,j;
// unsigned char Angka;
// Initial_pannel();
// clr_all_pannal();
// DrvGPIO_ClrBit(E_GPD,14);
// print_lcd(1, "Percobaan 2");
// print_lcd(2, "Praktikum TM");
 OpenKeyPad();

    while(1)
    {
     OpenKeyPad();
     tegangan=((float)adc/4096)*5000;
      DrvGPIO_SetBit(E_GPA,12);
     Angka = Scankey();
     if (Angka==1){
      clr_all_pannal();
      print_lcd(0, "Angka 1");
      delay();
     }
     else if (Angka==2){
      clr_all_pannal();
         DrvGPIO_ClrBit(E_GPA,12);
     }
     // isi sendiri sampai keypad 9
     else if (Angka==9){
         clr_all_pannal();
         for(i=0; i<8; i++){
               for(j=0; j<128; j++){
                if(j<64){
                 DrawBuffer[j+i*128]=Zoro[j+i*64];
                } else {
                 DrawBuffer[j+i*128]=Luffy[(j-64)+i*64];
                }
               }
              }
              draw_LCD(DrawBuffer);
      draw_LCD(DrawBuffer);
      delay();
     }
    }
}
